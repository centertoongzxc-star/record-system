<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ระบบบันทึกข้อมูลรายจ่าย</title>
<style>
    body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
    h1 { text-align: center; }
    .container { background: white; padding: 20px; border-radius: 10px; max-width: 900px; margin: auto; }
    label { font-weight: bold; }
    select, input { padding: 5px; margin: 5px 0; width: 100%; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #eaeaea; }

    .paid { background: #b7ffb7; }     /* สีเขียว */
    .unpaid { background: #ffb7b7; }   /* สีแดง */
    .signed { background: #ffddaa; }   /* สีส้ม */

    button { padding: 7px 12px; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
    .del-btn { background: #ff4d4d; color: white; }
    .save-btn { background: #4caf50; color: white; width: 100%; }
</style>
</head>
<body>

<div class="container">
    <h1>ระบบบันทึกข้อมูลรายจ่าย</h1>

    <label>หมวด</label>
    <select id="category">
        <option value="นายสิบ">นายสิบ</option>
        <option value="พลทหาร">พลทหาร</option>
        <option value="รายวัน">รายวัน</option>
    </select>

    <label>ชื่อผู้ซื้อ</label>
    <input type="text" id="name">

    <label>จำนวนเงิน</label>
    <input type="number" id="amount">

    <label>สถานะ</label>
    <select id="status">
        <option value="ยังไม่จ่าย">ยังไม่จ่าย</option>
        <option value="จ่ายแล้ว">จ่ายแล้ว</option>
        <option value="เซ็น">เซ็น</option>
    </select>

    <button class="save-btn" onclick="saveData()">บันทึกข้อมูล</button>

    <h2>ข้อมูลย้อนหลัง</h2>
    <table>
        <thead>
            <tr>
                <th>หมวด</th>
                <th>ชื่อ</th>
                <th>จำนวนเงิน</th>
                <th>วัน-เวลา</th>
                <th>สถานะ</th>
                <th>ลบ</th>
            </tr>
        </thead>
        <tbody id="dataTable"></tbody>
    </table>
</div>

<script>
let dataList = JSON.parse(localStorage.getItem("records")) || [];

function getCurrentDateTime() {
    const now = new Date();
    const date = now.toLocaleDateString('th-TH');
    const time = now.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' });
    return `${date} ${time}`;
}

function saveData() {
    const item = {
        category: document.getElementById("category").value,
        name: document.getElementById("name").value,
        amount: document.getElementById("amount").value,
        datetime: getCurrentDateTime(),
        status: document.getElementById("status").value
    };

    if (!item.name || !item.amount) {
        alert("กรุณากรอกข้อมูลให้ครบ");
        return;
    }

    dataList.push(item);
    localStorage.setItem("records", JSON.stringify(dataList));
    loadTable();
}

function loadTable() {
    let table = document.getElementById("dataTable");
    table.innerHTML = "";

    dataList.forEach((item, index) => {
        let row = document.createElement("tr");

        row.className =
            item.status === "จ่ายแล้ว" ? "paid" :
            item.status === "เซ็น" ? "signed" :
            "unpaid";

        row.innerHTML = `
            <td>${item.category}</td>
            <td>${item.name}</td>
            <td>${item.amount}</td>
            <td>${item.datetime}</td>
            <td>${item.status}</td>
            <td><button class="del-btn" onclick="deleteItem(${index})">ลบ</button></td>
        `;

        table.appendChild(row);
    });
}

function deleteItem(index) {
    if (confirm("ต้องการลบข้อมูลนี้ใช่ไหม?")) {
        dataList.splice(index, 1);
        localStorage.setItem("records", JSON.stringify(dataList));
        loadTable();
    }
}

loadTable();
</script>

</body>
</html>
